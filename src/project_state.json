{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Implement SOS alert targeting logic to notify only the nearest police users (2) within a 20 meter radius, instead of passive/broadcast viewing.",
  "architectural_notes": [
    "SOS alert delivery should select nearest police users (count=2) within 20m radius instead of relying on police clients polling/broadcast viewing."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-update-the-frontend-so-police-clients-send-periodic-police-location-updates-to-the-backend-while-the-police-interface-is-open-and-ensure-the-police-sos-alerts-view-only-reflects-targeted-alerts-returned-by-the-backend",
      "title": "Update the frontend so Police clients send periodic police location updates to the backend while the Police interface is open, and ensure the Police SOS alerts view only reflects targeted alerts returned by the backend.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-copy-in-the-ambulance-interface-to-reflect-sos-targeting-to-the-nearest-2-police-within-20-meters-replacing-existing-statements-that-imply-broadcasting-to-all-police-or-using-a-1-km-radius",
      "title": "Update user-facing copy in the Ambulance interface to reflect SOS targeting to the nearest 2 police within 20 meters, replacing existing statements that imply broadcasting to all police or using a 1 km radius.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Update SOS notifications to alert only the nearest 2 police users within a 20 meter radius.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement SOS targeting so that when an ambulance triggers SOS, the backend selects and records only the nearest 2 police users within a 20 meter radius (0.02 km), and only those police users can retrieve/see that active SOS alert via SOS alert queries.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add backend APIs to allow police users to continuously update their own location (similar to ambulance location updates), and ensure these locations are used for SOS nearest-police selection.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Target SOS alerts to nearest 2 police within 20 meters",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}